<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.my.megabox.member.dao.IMemberDAO">
	
	<select id="selectId" parameterType="String" resultType="com.my.megabox.member.dto.MemberDTO" >
		SELECT * FROM user_info WHERE u_id=#{id}
	</select>
	
	<select id="YMList" parameterType="int" resultType="com.my.megabox.booking.dto.BookingDTO">
		select a.*, b.m_name, b.m_poster, c.s_name, d.c_name, e.r_date 
					from booking a, 
					(select a.m_num, b.m_name, b.m_poster from booking a, movie b where a.m_num = b.m_num)b, 
					(select a.s_num, b.s_name from booking a, screen b where a.s_num = b.s_num)c,
					(select a.c_num, b.c_name from booking a, cinema b where a.c_num = b.c_num)d,
					(select a.r_num, b.r_date from booking a, running b where a.r_num = b.r_num)e 
					where a.u_num=#{num}
	</select>
	
	<insert
	
	<update id="chagePw" parameterType="com.my.megabox.member.dto.MemberDTO">
		UPDATE user_info SET u_pw=#{pwnew} WHERE u_id=#{id}
	</update>
	
	<delete id="deleteMember" parameterType="String">
		DELETE FROM user_info WHERE u_id=#{id}
	</delete>
</mapper>
